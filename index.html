<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üìñ –î–æ–≤—ñ–¥–Ω–∏–∫ –ö–∞—Ä–ª—Å—Ä—É–µ ‚Äî Mini App</title>
  <meta name="description" content="–ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–Ω—Ç–∞–∫—Ç–∏: FAQ —ñ –î–æ–∫—É–º–µ–Ω—Ç–∏. –ü–æ—à—É–∫, —Ç–µ–≥–∏, –≤–∏–±—Ä–∞–Ω–µ." />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root{
      --bg:#0f1115;--card:#161a22;--text:#e6e8ee;--muted:#a2a8b3;
      --primary:#6aa0ff;--accent:#ffc46a;--ok:#2ecc71;--danger:#ff6b6b;
      --radius:16px;--shadow:0 10px 24px rgba(0,0,0,.35)
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:var(--bg);color:var(--text);
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica Neue,Arial;
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale
    }
    .container{max-width:980px;margin:0 auto;padding:18px}
    header{display:flex;align-items:center;justify-content:space-between;gap:14px;margin-bottom:14px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:44px;height:44px;border-radius:14px;background:var(--card);display:grid;place-items:center;box-shadow:var(--shadow);font-size:22px}
    .title{font-weight:800;font-size:18px}
    .subtitle{color:var(--muted);font-size:13px}

    .botbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:6px 0 14px}
    .botname{padding:8px 12px;border-radius:999px;background:#141a26;border:1px solid rgba(255,255,255,.06);color:var(--muted);font-weight:700}
    .tgbtn{background:var(--primary);color:#0b1220;border:0;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer;box-shadow:var(--shadow)}
    .tgbtn:hover{filter:brightness(1.05)}

    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}
    .tab{border:1px solid rgba(255,255,255,.08);background:transparent;color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700}
    .tab.active{background:var(--primary);border-color:var(--primary);color:#0b1220}

    .bar{display:flex;align-items:center;gap:10px;padding:8px 12px;background:#121620;border-radius:12px;margin:10px 0 14px}
    .bar input[type="search"]{flex:1;background:transparent;border:0;color:var(--text);font-size:14px;outline:none}

    .tags{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 14px}
    .chip{font-size:12px;color:var(--muted);background:rgba(255,255,255,.06);padding:5px 9px;border-radius:999px;cursor:pointer;border:1px solid rgba(255,255,255,.06)}
    .chip.active{background:var(--accent);color:#2b1a00;border-color:var(--accent);font-weight:800}

    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    @media (max-width:920px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:560px){.grid{grid-template-columns:1fr}}

    .card{background:var(--card);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:8px;border:1px solid rgba(255,255,255,.06)}
    .card h3{margin:0;font-size:16px}
    .meta{color:var(--muted);font-size:12px}
    .actions{display:flex;gap:8px;margin-top:6px;flex-wrap:wrap}
    .btn{border:1px solid rgba(255,255,255,.08);background:transparent;color:var(--text);padding:8px 10px;border-radius:10px;cursor:pointer;font-weight:700}
    .btn.primary{background:var(--primary);color:#0b1220;border-color:var(--primary)}
    .btn.ok{background:var(--ok);color:#06120a;border-color:var(--ok)}
    .btn.danger{background:var(--danger);color:#160606;border-color:var(--danger)}
    .fav{margin-left:auto;background:#1b2436}
    .tagrow{display:flex;gap:6px;flex-wrap:wrap}
    .small{font-size:12px;color:var(--muted)}
    .empty{color:var(--muted);text-align:center;padding:30px 6px}

    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:flex-end;justify-content:center;background:rgba(0,0,0,.5);z-index:40}
    .sheet{width:100%;max-width:720px;background:var(--card);border-radius:16px 16px 0 0;padding:16px;border:1px solid rgba(255,255,255,.08)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .sheet h3{margin:0 0 4px 0}
    .close{margin-left:auto;background:#192033;border:1px solid rgba(255,255,255,.08);color:var(--muted)}
    .copy{background:#1e2942}
    .sheet .k{color:var(--muted);font-size:12px}
    .sheet .v{font-weight:700}

    .footer{margin:26px 0 40px;text-align:center;color:var(--muted);font-size:12px}
    .link{color:var(--primary);text-decoration:none}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">üó∫Ô∏è</div>
        <div>
          <div class="title">–î–æ–≤—ñ–¥–Ω–∏–∫ –ö–∞—Ä–ª—Å—Ä—É–µ</div>
          <div class="subtitle">FAQ ‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç–∏</div>
        </div>
      </div>
      <div class="botbar">
        <div class="botname"></div>
        <button class="tgbtn" id="contactAdmin">–ó–≤'—è–∑–æ–∫ –∑ –∞–¥–º—ñ–Ω–æ–º</button>
        <button class="tgbtn" id="openBot">–ß–∞—Ç Karlsruhe</button>
      </div>
    </header>

    <!-- –ù–∞–≤—ñ–≥–∞—Ü—ñ—è: –ª–∏—à FAQ —ñ –î–æ–∫—É–º–µ–Ω—Ç–∏ -->
    <nav class="tabs" id="tabs">
      <button class="tab active" data-cat="faq">FAQ</button>
      <button class="tab" data-cat="docs">–î–æ–∫—É–º–µ–Ω—Ç–∏</button>
    </nav>

    <!-- –ü–æ—à—É–∫ -->
    <div class="bar">
      <span class="small">üîé</span>
      <input id="search" type="search" placeholder="–ü–æ—à—É–∫ –ø–æ –Ω–∞–∑–≤—ñ, —Ç–µ–≥–∞–º, –∞–¥—Ä–µ—Å—ñ‚Ä¶" />
    </div>

    <!-- –¢–µ–≥–∏ -->
    <div class="tags" id="tags"></div>

    <!-- –°—ñ—Ç–∫–∞ –∫–∞—Ä—Ç–æ–∫ -->
    <section id="grid" class="grid" aria-live="polite"></section>

  

  <!-- –ú–æ–¥–∞–ª–∫–∞ -->
  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="sheet">
      <div class="row">
        <h3 id="mTitle">–ù–∞–∑–≤–∞</h3>
        <button class="btn close" id="mClose">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
      <div class="small" id="mCategory">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</div>
      <p id="mDesc" style="margin:10px 0 6px"></p>

      <div class="row small">
        <span class="k">–ê–¥—Ä–µ—Å–∞:</span><span class="v" id="mAddr">‚Äî</span>
      </div>
      <div class="row small">
        <span class="k">–¢–µ–ª–µ—Ñ–æ–Ω:</span><span class="v" id="mPhone">‚Äî</span>
        <button class="btn copy" id="copyPhone">–ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
      </div>
      <div class="row small">
        <span class="k">–ö–æ–Ω—Ç–∞–∫—Ç–∏:</span>
        <a id="mSite" class="btn" href="#" target="_blank" rel="noopener">üåê –°–∞–π—Ç</a>
        <a id="mTG" class="btn" href="#" target="_blank" rel="noopener">Telegram</a>
        <a id="mWA" class="btn" href="#" target="_blank" rel="noopener">WhatsApp</a>
      </div>
      <div class="row small">
        <span class="k">–¢–µ–≥–∏:</span><span class="v" id="mTags">‚Äî</span>
      </div>
      <div class="actions" style="margin-top:12px">
        <a id="mMap" class="btn primary" href="#" target="_blank" rel="noopener">üìç –ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –Ω–∞ –∫–∞—Ä—Ç—ñ</a>
        <button id="mFav" class="btn fav">‚≠ê –í –æ–±—Ä–∞–Ω–µ</button>
        <button id="mShare" class="btn ok">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è</button>
      </div>
    </div>
  </div>

  <script>
    // ===== –î–ê–ù–Ü =====
    // –ü–æ–ª—è: id, cat, title, desc, address, phone, site, tg, wa, tags[], mapQuery
    const DATA = [
      // FAQ: LEA (–æ–Ω–æ–≤–ª–µ–Ω–Ω—è 01.09.25)
      { id:"lea", cat:"faq", title:"LEA Karlsruhe ‚Äî —Ä–æ–∑–ø–æ–¥—ñ–ª—å—á–∏–π —Ç–∞–±—ñ—Ä (–æ–Ω–æ–≤–ª–µ–Ω–Ω—è 01.09.25)",
        desc:"–¢–∞–±—ñ—Ä –ø–µ—Ä–≤–∏–Ω–Ω–æ–≥–æ –ø—Ä–∏–π–æ–º—É –±—ñ–∂–µ–Ω—Ü—ñ–≤. –ü—Ä–∞—Ü—é—î —Ü—ñ–ª–æ–¥–æ–±–æ–≤–æ —ñ –±–µ–∑ –≤–∏—Ö—ñ–¥–Ω–∏—Ö. –ê–¥—Ä–µ—Å–∞: Durlacher Allee 100. –ó–≤—ñ–¥—Å–∏ –Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—å –¥–æ –∑–µ–º–µ–ª—å, –¥–µ —î –ø–æ—Ç—Ä–µ–±–∞ (–º–æ–∂—É—Ç—å –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤ —ñ–Ω—à—ñ –∑–µ–º–ª—ñ: –ë–∞–≤–∞—Ä—ñ—è, –ì–µ—Å—Å–µ–Ω —Ç–æ—â–æ). –ó–∞–∑–≤–∏—á–∞–π —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä –∑–Ω–∞—Ö–æ–¥—è—Ç—å –∑–∞ –¥–µ–∫—ñ–ª—å–∫–∞ –¥–Ω—ñ–≤. –ü—Ä–∏–π–º–∞—é—Ç—å –∑ –Ω–µ–≤–µ–ª–∏–∫–∏–º–∏ —Ç–≤–∞—Ä–∏–Ω–∞–º–∏.",
        address:"Durlacher Allee 100, 76137 Karlsruhe",
        phone:"",
        site:"",
        tg:"",
        wa:"",
        tags:["–±—ñ–∂–µ–Ω—Ü—ñ","—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è","LEA"],
        mapQuery:"Durlacher Allee 100 Karlsruhe" },

      // –î–æ–∫—É–º–µ–Ω—Ç–∏: Ausl√§nderbeh√∂rde
      { id:"ausl", cat:"docs", title:"Ausl√§nderbeh√∂rde Karlsruhe ‚Äî –¥–æ–∑–≤–æ–ª–∏ –Ω–∞ –ø–µ—Ä–µ–±—É–≤–∞–Ω–Ω—è",
        desc:"SG 4: –ì—É–º–∞–Ω—ñ—Ç–∞—Ä–Ω–µ –ø–µ—Ä–µ–±—É–≤–∞–Ω–Ω—è, –≤–∏—ó–∑–¥ —ñ –±–µ–∑–ø–µ–∫–∞ (–≤–∫–ª—é—á–Ω–æ —ñ–∑ –∑–∞—Ö–∏—Å—Ç–æ–º –≥—Ä–æ–º–∞–¥—è–Ω –£–∫—Ä–∞—ó–Ω–∏). –ü–æ–¥–∞–π—Ç–µ –∑–∞—è–≤—É –æ–Ω–ª–∞–π–Ω —á–µ—Ä–µ–∑ Germany4Ukraine.",
        address:"Kaiserallee 8, 76133 Karlsruhe",
        phone:"+49 721 133-3261",
        site:"https://www.germany4ukraine.de/UA/online-services/aufenthaltserlaubnis/seite_node.html#/",
        tg:"",
        wa:"",
        tags:["–¥–æ–∫—É–º–µ–Ω—Ç–∏","–ø–µ—Ä–µ–±—É–≤–∞–Ω–Ω—è","Ausl√§nderbeh√∂rde"],
        mapQuery:"Ausl√§nderbeh√∂rde Karlsruhe" },

      // –î–æ–∫—É–º–µ–Ω—Ç–∏: –®–∫–æ–ª–∏ ‚Äî –æ—Ñ—ñ—Ü—ñ–π–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
      { id:"schools", cat:"docs", title:"–®–∫–æ–ª–∏ –¥–ª—è –¥—ñ—Ç–µ–π-–±—ñ–∂–µ–Ω—Ü—ñ–≤ ‚Äî –æ—Ñ—ñ—Ü—ñ–π–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è",
        desc:"–û—Ñ—ñ—Ü—ñ–π–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –≤—ñ–¥ –º—ñ—Å—Ç–∞: —à–∫—ñ–ª—å–Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –¥–ª—è –¥—ñ—Ç–µ–π —ñ –º–æ–ª–æ–¥—ñ –∑ –£–∫—Ä–∞—ó–Ω–∏. –ß–µ—Ä–µ–∑ 6 –º—ñ—Å—è—Ü—ñ–≤ –ø—ñ—Å–ª—è –≤'—ó–∑–¥—É –¥—ñ—Ç–∏ –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å –ø—ñ–¥ –∑–∞–∫–æ–Ω –ø—Ä–æ —à–∫—ñ–ª—å–Ω—É –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ—Å—Ç—å —É –ë–∞–¥–µ–Ω-–í—é—Ä—Ç–µ–º–±–µ—Ä–∑—ñ. –Ñ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ –ø—ñ–¥–≥–æ—Ç–æ–≤—á—ñ –∫–ª–∞—Å–∏ (Vkl, VABO).",
        address:"‚Äî",
        phone:"",
        site:"https://www.karlsruhe.de/bildung-soziales/schulstadt-karlsruhe/schulanmeldung-fuer-gefluechtete-kinder-und-jugendliche-aus-der-ukraine",
        tg:"",
        wa:"",
        tags:["—à–∫–æ–ª–∞","–æ—Å–≤—ñ—Ç–∞","–¥—ñ—Ç–∏"],
        mapQuery:"Karlsruhe Schulen" },

      // –î–æ–∫—É–º–µ–Ω—Ç–∏ / –¥–æ–ø–æ–º–æ–≥–∞: UNESON (—Ç–∏–º—á–∞—Å–æ–≤–∞ —à–∫–æ–ª–∞)
      { id:"uneson", cat:"docs", title:"UNESON ‚Äî —Ç–∏–º—á–∞—Å–æ–≤–∞ —à–∫–æ–ª–∞ –¥–ª—è –¥—ñ—Ç–µ–π-–±—ñ–∂–µ–Ω—Ü—ñ–≤",
        desc:"–î—ñ—Ç–∏, —è–∫—ñ —â–µ –Ω–µ –æ—Ç—Ä–∏–º–∞–ª–∏ –º—ñ—Å—Ü–µ –≤ –¥–µ—Ä–∂–∞–≤–Ω—ñ–π —à–∫–æ–ª—ñ, –º–æ–∂—É—Ç—å –≤—ñ–¥–≤—ñ–¥—É–≤–∞—Ç–∏ UNESON (–ø–Ω‚Äì–ø—Ç, 9:00‚Äì16:00). –•–∞—Ä—á—É–≤–∞–Ω–Ω—è: —Å–Ω—ñ–¥–∞–Ω–æ–∫ —ñ –≥–∞—Ä—è—á–∏–π –æ–±—ñ–¥. –ó–∞–ø–∏—Å: info@uneson.org.",
        address:"Lernfreunde-Haus, Campus Ost, Geb√§ude 70.13 A, Rintheimer Querallee 2, 76131 Karlsruhe",
        phone:"",
        site:"mailto:info@uneson.org",
        tg:"",
        wa:"",
        tags:["—à–∫–æ–ª–∞","—Ç–∏–º—á–∞—Å–æ–≤–∞","UNESON"],
        mapQuery:"Lernfreunde-Haus Karlsruhe" }
    ];

    const CATS = { faq:"FAQ", docs:"–î–æ–∫—É–º–µ–Ω—Ç–∏" };

    // ===== DOM =====
    const $tabs = document.getElementById("tabs");
    const $grid = document.getElementById("grid");
    const $tags = document.getElementById("tags");
    const $search = document.getElementById("search");
    const $modal = document.getElementById("modal");
    const $mTitle = document.getElementById("mTitle");
    const $mCategory = document.getElementById("mCategory");
    const $mDesc = document.getElementById("mDesc");
    const $mAddr = document.getElementById("mAddr");
    const $mPhone = document.getElementById("mPhone");
    const $mSite = document.getElementById("mSite");
    const $mTG = document.getElementById("mTG");
    const $mWA = document.getElementById("mWA");
    const $mTags = document.getElementById("mTags");
    const $mMap = document.getElementById("mMap");
    const $mFav = document.getElementById("mFav");
    const $mShare = document.getElementById("mShare");
    const $mClose = document.getElementById("mClose");
    const $openBot = document.getElementById("openBot");
    const $contactAdmin = document.getElementById("contactAdmin");

    // ===== STATE =====
    let state = {
      cat: "faq",   // –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è FAQ
      q: "",
      tag: null,
      fav: new Set(JSON.parse(localStorage.getItem("fav") || "[]"))
    };

    // –ö–Ω–æ–ø–∫–∏ ‚Äî –ø—ñ–¥—Å—Ç–∞–≤ —Å–≤–æ—ó username —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
    $contactAdmin.addEventListener("click", ()=>{
      const url = "https://t.me/Nameid53277432"; // –∑–∞–º—ñ–Ω–∏ –Ω–∞ username –∞–¥–º—ñ–Ω–∞
      if (window.Telegram?.WebApp) Telegram.WebApp.openTelegramLink(url);
      else window.open(url, "_blank");
    });
    $openBot.addEventListener("click", ()=>{
      const url = "https://t.me/karlsruhe_ua";
      if (window.Telegram?.WebApp) Telegram.WebApp.openTelegramLink(url);
      else window.open(url, "_blank");
    });

    // ===== –§—É–Ω–∫—Ü—ñ—ó =====
    function buildTags(){
      const pool = DATA.filter(x => x.cat === state.cat);
      const set = new Set();
      pool.forEach(x => x.tags?.forEach(t => set.add(t)));
      $tags.innerHTML = "";
      if (set.size === 0) return;
      const all = document.createElement("button");
      all.className = "chip" + (state.tag === null ? " active" : "");
      all.textContent = "–£—Å—ñ —Ç–µ–≥–∏";
      all.onclick = ()=>{ state.tag = null; render(); };
      $tags.appendChild(all);
      [...set].sort().forEach(t=>{
        const b = document.createElement("button");
        b.className = "chip" + (state.tag === t ? " active" : "");
        b.textContent = t;
        b.onclick = ()=>{ state.tag = state.tag === t ? null : t; render(); };
        $tags.appendChild(b);
      });
    }

    function card(item){
      const div = document.createElement("div");
      div.className = "card";
      div.innerHTML = `
        <h3>${item.title}</h3>
        <div class="meta">${CATS[item.cat] || ""}</div>
        <div class="small">${item.desc}</div>
        <div class="tagrow">${(item.tags||[]).map(t=>`<span class="chip">${t}</span>`).join("")}</div>
        <div class="actions">
          <button class="btn primary">–í—ñ–¥–∫—Ä–∏—Ç–∏</button>
          <button class="btn ${state.fav.has(item.id) ? "danger" : "fav"}" data-id="${item.id}">
            ${state.fav.has(item.id) ? "‚àí –í–∏–¥–∞–ª–∏—Ç–∏" : "‚≠ê –í –æ–±—Ä–∞–Ω–µ"}
          </button>
        </div>
      `;
      div.querySelector(".btn.primary").onclick = ()=> openModal(item);
      div.querySelector("[data-id]").onclick = (e)=>{
        toggleFav(item.id);
        render();
      };
      return div;
    }

    function toggleFav(id){
      if (state.fav.has(id)) state.fav.delete(id);
      else state.fav.add(id);
      localStorage.setItem("fav", JSON.stringify([...state.fav]));
    }

    function render(){
      document.querySelectorAll(".tab").forEach(t=>{
        t.classList.toggle("active", t.dataset.cat === state.cat);
      });
      buildTags();

      let list = DATA.filter(x => x.cat === state.cat);
      const q = state.q.trim().toLowerCase();
      if (q){
        list = list.filter(x =>
          (x.title || "").toLowerCase().includes(q) ||
          (x.desc || "").toLowerCase().includes(q) ||
          (x.address || "").toLowerCase().includes(q) ||
          (x.tags || []).some(t => t.toLowerCase().includes(q))
        );
      }
      if (state.tag){
        list = list.filter(x => x.tags?.includes(state.tag));
      }

      $grid.innerHTML = "";
      if (list.length === 0){
        $grid.innerHTML = `<div class="empty">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –ó–º—ñ–Ω—ñ—Ç—å –∑–∞–ø–∏—Ç –∞–±–æ —Ç–µ–≥–∏.</div>`;
        return;
      }
      list.forEach(x => $grid.appendChild(card(x)));
    }

    function setupLink(a, href, label){
      if (href){
        a.href = href;
        a.style.display = "inline-block";
        a.textContent = label;
      } else {
        a.style.display = "none";
      }
    }

    function openModal(it){
      $mTitle.textContent = it.title;
      $mCategory.textContent = CATS[it.cat] || "";
      $mDesc.textContent = it.desc || "‚Äî";
      $mAddr.textContent = it.address || "‚Äî";
      $mPhone.textContent = it.phone || "‚Äî";
      $mTags.textContent = (it.tags||[]).join(", ") || "‚Äî";

      setupLink($mSite, it.site, "üåê –°–∞–π—Ç");
      setupLink($mTG, it.tg, "Telegram");
      setupLink($mWA, it.wa, "WhatsApp");
      $mMap.href = `https://www.openstreetmap.org/search?query=${encodeURIComponent(it.mapQuery || it.address || "")}`;

      $mFav.textContent = state.fav.has(it.id) ? "‚àí –í–∏–¥–∞–ª–∏—Ç–∏ –∑ –æ–±—Ä–∞–Ω–æ–≥–æ" : "‚≠ê –í –æ–±—Ä–∞–Ω–µ";
      $mFav.onclick = ()=>{ toggleFav(it.id); openModal(it); render(); };

      $mShare.onclick = async ()=>{
        const text = `üìç ${it.title}\n${it.desc}\n${it.address || ""}`;
        if (navigator.share){
          try { await navigator.share({text}); } catch(e){ /* silent */ }
        } else if (window.Telegram?.WebApp){
          Telegram.WebApp.shareUrl(location.href, text);
        } else {
          await navigator.clipboard.writeText(text);
          alert("–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É");
        }
      };

      document.getElementById("copyPhone").onclick = async ()=>{
        if (it.phone) { await navigator.clipboard.writeText(it.phone); alert("–¢–µ–ª–µ—Ñ–æ–Ω —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ"); }
      };

      $modal.style.display = "flex";
    }

    function closeModal(){ $modal.style.display = "none"; }

    // –ü–æ–¥—ñ—ó
    $tabs.addEventListener("click", (e)=>{
      const btn = e.target.closest(".tab");
      if (!btn) return;
      state.cat = btn.dataset.cat;
      state.tag = null;
      state.q = "";
      $search.value = "";
      render();
    });
    $search.addEventListener("input", e=>{ state.q = e.target.value; render(); });
    $mClose.addEventListener("click", closeModal);
    $modal.addEventListener("click", (e)=>{ if (e.target === $modal) closeModal(); });

    // Telegram theme (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)
    (function initTheme(){
      if (window.Telegram?.WebApp){
        const app = Telegram.WebApp;
        try { app.expand(); } catch(e){}
        const p = app.themeParams || {};
        const css = document.documentElement.style;
        if (p.bg_color) css.setProperty('--bg', p.bg_color);
        if (p.secondary_bg_color) css.setProperty('--card', p.secondary_bg_color);
        if (p.text_color) css.setProperty('--text', p.text_color);
        if (p.hint_color) css.setProperty('--muted', p.hint_color);
        if (p.button_color) css.setProperty('--primary', p.button_color);
      }
    })();

    // –°—Ç–∞—Ä—Ç
    render();
  </script>
</body>
</html>
